<h1>AI Interview Room - Candidate Details</h1>

<form id="infoForm">

  <input type="text" id="name" placeholder="Enter your name" required />

  <select id="domain" required>
    <option value="">Select Domain</option>
    <option>Data Science</option>
    <option>Web Development</option>
    <option>AI / ML</option>
    <option>Cyber Security</option>
  </select>

  <input type="text" id="position" placeholder="Enter position" required />

  <input type="file" id="resume" accept=".pdf" required />

  <button type="submit">Proceed To Interview</button>

</form>

<script>
document.getElementById("infoForm").addEventListener("submit", async function(e){
    e.preventDefault();

    const name = document.getElementById("name").value;
    const domain = document.getElementById("domain").value;
    const position = document.getElementById("position").value;

    sessionStorage.setItem("candidate_name", name);
    sessionStorage.setItem("domain", domain);
    sessionStorage.setItem("position", position);

    const formData = new FormData();
    formData.append("name", name);
    formData.append("domain", domain);
    formData.append("position", position);
    formData.append("file", document.getElementById("resume").files[0]);

    try {
        const res = await fetch("http://127.0.0.1:8000/upload_resume", {
            method: "POST",
            body: formData
        });

        const data = await res.json();
        console.log(data);

        if(data.success){
            window.location.href = "aimeet.html";
        }
        else{
            alert("Upload failed");
        }

    } catch(error){
        console.error(error);
        alert("Server not responding");
    }
});
</script>
